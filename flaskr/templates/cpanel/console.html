{% extends 'cpanel/base.html' %}



{% block title %}
  Console Logs
{% endblock %}

{% block head %}
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/menu.css') }}">
{% endblock %}
{% block content %}
<body>
    <style>
        #console {
            font-family: monospace;
            color: white;
            width: 90%;
            height: 90vh;
            overflow-y: auto;
            white-space: pre-wrap;
            border: 1px solid black;
            padding: 10px;
            background-color: black;

        }
    </style>
    <script>
        const containerId = "{{ container_id }}"; // Container ID from docker

        function startStream() {
            const eventSource = new EventSource(`/stream/${containerId}`);
            const consoleDiv = document.getElementById("console");

            eventSource.onmessage = function(event) {
                const newLine = document.createElement("div");
                newLine.textContent = event.data;
                consoleDiv.appendChild(newLine);
                consoleDiv.scrollTop = consoleDiv.scrollHeight; // Auto-scroll
            };

            eventSource.onerror = function() {
                consoleDiv.innerHTML += "\n[ERROR] Connection lost.";
                eventSource.close();
            };
        }

        window.onload = startStream;
    </script>
    <h2 style="color: black;">Docker Console Logs</h2>
    <div id="console"></div>
</body>

{% endblock %}

